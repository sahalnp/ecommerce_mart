<%- include('../partials/authHeader') %>

<style>
  body {
    background: linear-gradient(135deg, #f3f4f6, #e0e0e0);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  input:-webkit-autofill {
  -webkit-box-shadow: 0 0 0px 1000px white inset !important;
  box-shadow: 0 0 0px 1000px white inset !important;
  -webkit-text-fill-color: #000 !important;
}

  .signup-container {
    background: #ffffff;
    padding: 40px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
  }

  .signup-container:hover {
    transform: translateY(-3px);
  }

  .logo {
    font-size: 2.2rem;
    font-weight: 700;
    color: #8B0000;
  }

  .form-label {
    font-weight: 500;
  }

  .btn_3 {
    background-color: #8B0000;
    color: #fff;
    border: none;
    padding: 12px 20px;
    font-weight: 600;
    border-radius: 6px;
    transition: background-color 0.3s ease;
  }

  .btn_3:hover {
    background-color: #a30000;
  }

  .alert {
    font-size: 0.9rem;
    padding: 8px 12px;
  }

  .country-code-box {
    max-width: 120px;
  }

  .password-strength {
    margin-top: -10px;
    margin-bottom: 10px;
  }

  .strength-requirement {
    font-size: 0.9rem;
    margin-left: 5px;
    color: #555;
    display: flex;
    align-items: center;
  }

  .strength-requirement::before {
    content: "â€¢";
    color: #8B0000;
    margin-right: 8px;
    font-size: 1.2rem;
    line-height: 1;
  }

  @media (max-width: 576px) {
    .signup-container {
      padding: 25px 20px;
    }
  }
</style>

</head>
<body>

<div class="container py-2">
  <div class="signup-container mx-auto" style="max-width: 500px;">

    <div class="text-center mb-4">
      <div class="logo">M4 Mart</div>
      <p class="text-muted mb-1">Create your M4 Mart account</p>
    </div>

    <form method="post" action="/signup" onsubmit="return validateSignup()" novalidate>
       <input type="hidden" name="_csrf" value="<%= csrfToken %>">
      <div class="mb-3 row">
  <div class="col-md-6">
    <label for="firstname" class="form-label">First Name</label>
    <input type="text" class="form-control" name="firstname" id="firstname" placeholder="First Name" required>
  </div>
  <div class="col-md-6">
    <label for="lastname" class="form-label">Last Name</label>
    <input type="text" class="form-control" name="lastname" id="lastname" placeholder="Last Name" required>
  </div>
</div>


      <div class="mb-3">
        
      </div>

      <div class="mb-3">
        <label for="email" class="form-label">Email Address</label>
        <input type="email" class="form-control" name="email" id="email" placeholder="Enter your email" required>
      </div>

      <div class="mb-3">
        <label for="number" class="form-label">Phone Number</label>
        <div class="input-group">
          <select class="form-select country-code-box" name="countryCode" id="country-code" required>
            <option value="+1">ðŸ‡ºðŸ‡¸ +1</option>
            <option value="+91" selected>ðŸ‡®ðŸ‡³ +91</option>
            <option value="+44">ðŸ‡¬ðŸ‡§ +44</option>
            <option value="+61">ðŸ‡¦ðŸ‡º +61</option>
            <option value="+81">ðŸ‡¯ðŸ‡µ +81</option>
          </select>
          <input type="tel" class="form-control" name="number" id="number" placeholder="Enter your number " required pattern="[0-9]{6,15}">
        </div>
      </div>

      <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <input type="password" class="form-control" name="password" id="password" placeholder="Enter password" required>

        <!-- <div class="password-strength mt-2">
          <div id="length" class="strength-requirement">At least 8 characters</div>
          <div id="number-req" class="strength-requirement">Contains a number</div>
          <div id="special" class="strength-requirement">Contains a special character</div>
        </div>
      </div> -->

      <div class="mb-3">
        <label for="confirmPassword" class="form-label">Confirm Password</label>
        <input type="password" class=" form-control" id="confirmPassword" placeholder="Re-type password" required>
        <div class=" mt-2 d-none text-danger" id="password-error">
          Passwords must match!
        </div>
        <div class="mt-2 d-none text-danger" id="strength-error" >
          Password must be at least 8 characters long and include a number and a special character.
        </div>
      </div>

      <button type="submit" class="btn_3 w-100 mt-3">Sign Up</button>
    </form>

    <p class="text-center mt-3">Already have an account? <a href="/login" class="text-decoration-none text-danger">Log in</a></p>
  </div>
</div>

<script>
  function validateSignup() {
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    const passwordError = document.getElementById('password-error');
    const strengthError = document.getElementById('strength-error');

    if (password !== confirmPassword) {
      passwordError.classList.remove('d-none');
      strengthError.classList.add('d-none');
      return false;
    } else {
      passwordError.classList.add('d-none');
    }

    const passwordRegex = /^(?=.*[0-9])(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/;
    if (!passwordRegex.test(password)) {
      strengthError.classList.remove('d-none');
      return false;
    } else {
      strengthError.classList.add('d-none');
    }

    return true;
  }
</script>
