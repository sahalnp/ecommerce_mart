<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">
 
        <%- include('../partials/header') %>
    <head>  
    </head>
        <%- include('../partials/navbar') %>

        <div class="app-content content " >
            <div class="content-overlay"></div>
            <div class="content-wrapper"  style="margin-top: 50px;">
                <div class="content-header row">
                    <div class="content-header-left col-md-12 mb-3">
                        <h3 class="content-header-title text-dark " style="margin-top:-10px">
                            All Products
                        </h3>
                    </div>
                </div>

                <div class="content-body" >
                    <% if (products.length === 0) { %>
                    <div class="alert alert-info">No products found.</div>
                    <% } else { %>
                    <div class="table-responsive">
                        <table
                            class="table table-bordered table-hover text-center align-middle"
                        >
                            <thead class="bg-dark text-white">
                                <tr>
                                    <th>#</th>
                                    <th>Image</th>
                                    <th>Name</th>
                                    <th>Price</th>
                                    <th>Size</th>
                                    <th>Status</th>
                                    <th>In Stock</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% products.forEach((product, index) => { %>
                                <tr>
                                    <td><%= index + 1 %></td>
                                    <td>
                                        <img
                                            src="<%= product.image[0]?.filepath %>"
                                            style="
                                                max-width: 75px;
                                                max-height: 75px;
                                            "
                                            alt="Product Image"
                                        />
                                    </td>
                                    <td class="text-dark">
                                        <%= product.title %>
                                    </td>
                                    <td class="text-dark">
                                        ₹<%= product.salePrice ?
                                        product.salePrice.toFixed(2) :
                                        (product.productPrice ?
                                        product.productPrice.toFixed(2) :
                                        '0.00') %>
                                    </td>
                                    <td class="text-dark">
                                        <% if (Array.isArray(product.size) &&
                                        product.size.length > 0) { %> <%
                                        product.size.forEach(s => { %>
                                        <div>
                                            <%= s.size.toUpperCase() %> - ₹<%=
                                            s.price %>
                                        </div>
                                        <% }) %> <% } else { %>
                                        <span class="badge bg-secondary"
                                            >No size</span
                                        >
                                        <% } %>
                                    </td>
                                    <td class="text-success">
                                        <% if (product.inStock > 0) { %>
                                        <span
                                            class="badge bg-primary text-white fs-5"
                                            >Active</span
                                        >
                                        <% } else { %>
                                        <span class="badge text-primary"
                                            >Out of Stock</span
                                        >
                                        <% } %>
                                    </td>
                                    <td class="text-dark">
                                        <%= product.inStock || 0 %>
                                    </td>
                                    <td>
                                        <div
                                            class="d-flex justify-content-center gap-2"
                                        >
                                            <a
                                                href="/admin/product/edit/<%= product._id %>"
                                                class="btn btn-sm btn-outline-primary me-2"
                                            >
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <a
                                                href="/admin/product/delete-product/<%= product._id %>"
                                                class="btn btn-sm btn-outline-danger"
                                                onclick="return confirm('Are you sure you want to delete this product?')"
                                            >
                                                <i class="fas fa-trash-alt"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                                <% }) %>
                            </tbody>
                        </table>
                    </div>
                    <% } %>
                </div>
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="/admin/theme-assets/vendors/js/vendors.min.js"></script>
        <script src="/admin/theme-assets/js/core/app-menu-lite.js"></script>
        <script src="/admin/theme-assets/js/core/app-lite.js"></script>
        <%- include('../partials/footer') %>

